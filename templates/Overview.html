<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Colorectal Cancer Prediction</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://3Dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
  <style>
    body {
      background-color: #f8f9fa;
    }
    .navbar {
      background-color: #002855;
    }
    .navbar-brand, .nav-link {
      color: white !important;
    }
    .card {
      border-radius: 15px;
      overflow: hidden;
    }
    .btn-primary {
      background-color: #004aad;
      border: none;
    }
    .btn-primary:hover {
      background-color: #003580;
    }
    .result-box {
      font-size: 1.1rem;
      font-weight: bold;
      margin-top: 15px;
      text-align: center;
    }
    .viewer {
      width: 100%;
      height: 300px;
      margin-bottom: 10px;
    }
    .bgbl {
      background-color: #f2f9fc;
    }
    .navbar .dropdown-menu {
      background-color: #002855;
      border: none;
    }
    .navbar .dropdown-menu .dropdown-item {
      color: white;
    }
    .navbar .dropdown-menu .dropdown-item:hover {
      background-color: #004aad;
      color: #fff;
    }
    .navbar .nav-link:hover {
      color: gray !important;
    }
  </style>
</head>

<body>
  <div width="100%" align="center" style="padding: 10px; display: flex; align-items: center; justify-content: center; gap: 140px; background-color: white;">
    <img src="{{ url_for('static', filename='images/logo_Cancer.png') }}" alt="Logo" style="height: 90px; margin-right: 0px;">
    <p id="mainTitle" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 900; font-size: 200%; color: #003580;">Deep Learning Approaches for Non-invasive <br> Colorectal Cancer Prediction</p>
    <a href="https://en.uhsvnu.edu.vn/" target="_blank"><img src="{{ url_for('static', filename='images/logo_UHS.png') }}" alt="Logo" style="height: 60px; margin-right: 0px;"></a>
  </div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg" style="padding-top: 0px; padding-bottom: 0px;">
    <div class="container">
      <ul class="navbar-nav d-flex gap-5">
        <li class="nav-item">
          <a class="nav-link" href="/index" id="navPredict" style="font-size: 20px; color: white;">Predict</a>
        </li>
        <li class="nav-item" style="background-color: rgb(119, 158, 212); padding-top: 0px; padding-bottom: 0px;">
          <a class="nav-link" href="/overview" id="navOverview" style="font-size: 20px;">CRC Overview</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/howitworks" id="navHowItWorks" style="font-size: 20px;">How It Works</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact" id="navContact" style="font-size: 20px;">Contact</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/aboutus" id="navAboutUs" style="font-size: 20px;">About Us</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="langDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: 20px;">
            Change Language
          </a>
          <ul class="dropdown-menu" aria-labelledby="langDropdown">
            <li><a class="dropdown-item" href="#" data-lang="en">English</a></li>
            <li><a class="dropdown-item" href="#" data-lang="vi">Tiếng Việt</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Bootstrap Bundle JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Content -->
  <div class="container content-section">
    <br>
    <div style="text-align: center;">
      <img src="{{ url_for('static', filename='images/heatmap.png') }}" 
        alt="CRC Heatmap" 
        class="img-fluid" 
        style="margin-top:15px; width:800px;">
    </div>  
    
    <br>
    <h2 id="crcOverviewTitle">Overview of Colorectal Cancer</h2>
    <br>
    <p id="crcDescription1">
      Colorectal cancer (CRC) is one of the most common types of cancer worldwide, affecting the colon and rectum. It typically develops from precancerous polyps and may progress silently over time. Early detection through screening methods such as colonoscopy or fecal tests significantly improves treatment outcomes.
    </p>
    <p id="crcDescription2">
      Risk factors for CRC include age, family history, diet, lifestyle, and certain genetic conditions. Symptoms may include changes in bowel habits, blood in stool, abdominal discomfort, and unexplained weight loss.
    </p>
    <p id="crcDescription3">
      Advances in deep learning and predictive modeling now allow for non-invasive tools to estimate CRC risk and guide clinical decisions. Our tool integrates patient data to provide personalized predictions, helping clinicians and patients make informed choices.
    </p>
    <h2 id="extraTitle1"></h2>
  </div>

  <!-- Footer -->
  <footer class="text-center py-3 mt-4" style="background-color: #3a3c3d; color: white;">
    <p id="footerText" style="margin: 0; font-size: 14px;">© 2025 Colorectal Cancer Prediction</p>
  </footer>

  <!-- Script -->
  <script>
    let currentLang = 'en'; // Default language

    // Language translations
    const translations = {
      en: {
        mainTitle: "Deep Learning Approaches for Non-invasive <br> Colorectal Cancer Prediction",
        navPredict: "Predict",
        navOverview: "CRC Overview",
        navHowItWorks: "How It Works",
        navContact: "Contact",
        navAboutUs: "About Us",
        langDropdown: "Change Language",
        crcOverviewTitle: "Overview of Colorectal Cancer",
        crcDescription1: "Colorectal cancer (CRC) is a disease in which abnormal cells grow uncontrollably in the colon or rectum, leading to tumor formation.",
        crcDescription2: "Worldwide, CRC is the third most common cancer, responsible for 10% of all cases, and the second leading cause of cancer death. In Vietnam, CRC is the fourth leading cancer, accounting for 9.3% of all new cases in 2022, with more than 16,000 new diagnoses and 8,000 deaths reported. The rising incidence highlights its growing impact on public health.",
        crcDescription3: "Various risk factors of CRC have been identified, including genetic factors, eating habits, sedentary lifestyle, polyps, and ulcerative colitis. Without early detection and treatment, these tumors can invade surrounding tissues and metastasize to distant organs, significantly reducing survival outcomes.",
        extraTitle1: "",
        footerText: "© 2025 Colorectal Cancer Prediction"
      },
      vi: {
        mainTitle: "Ứng dụng Mô hình Học sâu trong Dự đoán <br> Ung thư Đại Trực Tràng Không Xâm Lấn",
        navPredict: "Dự đoán",
        navOverview: "Tổng quan CRC",
        navHowItWorks: "Cách hoạt động",
        navContact: "Liên hệ",
        navAboutUs: "Về chúng tôi",
        langDropdown: "Chọn ngôn ngữ",
        crcOverviewTitle: "Tổng quan về Ung thư Đại Trực Tràng",
        crcDescription1: "Ung thư đại trực tràng (CRC) là bệnh lý xảy ra khi các tế bào bất thường trong đại tràng hoặc trực tràng phát triển không kiểm soát, tạo thành khối u.",
        crcDescription2: "Trên toàn cầu, CRC là loại ung thư phổ biến thứ ba, chiếm khoảng 10% tổng số ca ung thư và là nguyên nhân tử vong đứng thứ hai do ung thư. Tại Việt Nam, CRC đứng thứ tư trong các loại ung thư thường gặp, chiếm 9,3% tổng số ca mắc mới năm 2022, với hơn 16.000 trường hợp được chẩn đoán mới và khoảng 8.000 ca tử vong. Tỷ lệ mắc bệnh ngày càng tăng cho thấy gánh nặng và tác động đáng kể của CRC đối với sức khỏe cộng đồng.",
        crcDescription3: "Các yếu tố nguy cơ của CRC đã được xác định bao gồm: yếu tố di truyền, thói quen ăn uống, lối sống ít vận động, sự xuất hiện của polyp, và viêm loét đại tràng. Nếu không được phát hiện và điều trị sớm, khối u có thể xâm lấn mô xung quanh và di căn đến các cơ quan khác, làm giảm đáng kể khả năng sống sót của người bệnh.",
        extraTitle1: "",
        footerText: "© 2025 Dự đoán Ung thư Đại Trực Tràng"
      }
    };

    // Switch language function
    function switchLang(lang) {
      try {
        if (!translations[lang]) throw new Error(`Invalid language: ${lang}`);
        currentLang = lang;
        console.log('Switching to language:', lang); // Debug
        document.getElementById("mainTitle").innerHTML = translations[lang].mainTitle;
        document.getElementById("navPredict").textContent = translations[lang].navPredict;
        document.getElementById("navOverview").textContent = translations[lang].navOverview;
        document.getElementById("navHowItWorks").textContent = translations[lang].navHowItWorks;
        document.getElementById("navContact").textContent = translations[lang].navContact;
        document.getElementById("navAboutUs").textContent = translations[lang].navAboutUs;
        document.getElementById("langDropdown").textContent = translations[lang].langDropdown;
        document.getElementById("crcOverviewTitle").textContent = translations[lang].crcOverviewTitle;
        document.getElementById("crcDescription1").textContent = translations[lang].crcDescription1;
        document.getElementById("crcDescription2").textContent = translations[lang].crcDescription2;
        document.getElementById("crcDescription3").textContent = translations[lang].crcDescription3;
        document.getElementById("extraTitle1").textContent = translations[lang].extraTitle1;
        document.getElementById("footerText").textContent = translations[lang].footerText;

        document.documentElement.lang = lang;
        window.history.pushState({}, '', `?lang=${lang}`);
        updateNavLinksByLang();
      } catch (error) {
        console.error('Error in switchLang:', error);
      }
    }

    // Update navigation links
    function updateNavLinksByLang() {
      const isVi = currentLang === 'vi';
      console.log('Is Vietnamese:', isVi); // Debug
      document.querySelectorAll('a.nav-link').forEach(a => {
        const href = a.getAttribute('href');
        if (!href || href.startsWith('#') || href.startsWith('http')) return;
        const url = new URL(href, location.origin);
        if (isVi) {
          url.searchParams.set('lang', 'vi');
        } else {
          url.searchParams.delete('lang');
        }
        a.setAttribute('href', url.pathname + url.search);
        console.log('Updated link:', href, 'to', a.getAttribute('href')); // Debug
      });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
      // Set initial language
      const urlLang = new URLSearchParams(window.location.search).get('lang');
      console.log('Detected lang:', urlLang); // Debug
      if (urlLang === 'vi') {
        currentLang = 'vi';
        switchLang('vi');
      } else {
        currentLang = 'en';
        switchLang('en');
      }

      // Handle dropdown clicks
      document.querySelectorAll('.dropdown-item').forEach(item => {
        item.addEventListener('click', function(e) {
          e.preventDefault();
          const lang = this.getAttribute('data-lang');
          console.log('Dropdown selected lang:', lang); // Debug
          switchLang(lang);
        });
      });

      updateNavLinksByLang();
    });
  </script>
</body>
</html>
